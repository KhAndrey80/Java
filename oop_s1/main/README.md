Пытался переписать то, что было, но запутался и сделал всё заново (с помощью).
В целом, с темой разобрался.